<div class="search-container">
  <input type="text" [(ngModel)]="query" placeholder="Explorar Eventos, Comunidades y más." class="search-input"
    (input)="onSearch()" />

  <div class="filters-container">
    <button class="filters-toggle-button" (click)="toggleFiltersVisibility()">
      <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M0 1C0 0.446875 0.446875 0 1 0H13C13.5531 0 14 0.446875 14 1C14 1.55313 13.5531 2 13 2H1C0.446875 2 0 1.55313 0 1ZM0 6C0 5.44688 0.446875 5 1 5H13C13.5531 5 14 5.44688 14 6C14 6.55312 13.5531 7 13 7H1C0.446875 7 0 6.55312 0 6ZM14 11C14 11.5531 13.5531 12 13 12H1C0.446875 12 0 11.5531 0 11C0 10.4469 0.446875 10 1 10H13C13.5531 10 14 10.4469 14 11Z"
          fill="#94B1F9" />
      </svg>
      Filtros
    </button>

    <div class="filters" *ngIf="filtersVisible">
      <label>
        <input type="checkbox" [checked]="filters['communities']" (change)="toggleFilter('communities', $event)" />
        Comunidades
      </label>
      <label>
        <input type="checkbox" [checked]="filters['events']" (change)="toggleFilter('events', $event)" />
        Eventos
      </label>
      <label>
        <input type="checkbox" [checked]="filters['teams']" (change)="toggleFilter('teams', $event)" />
        Equipos
      </label>
      <label>
        <input type="checkbox" [checked]="filters['users']" (change)="toggleFilter('users', $event)" />
        Usuarios
      </label>
    </div>
  </div>
</div>

<div *ngIf="query.trim()" class="results-container">
  <div *ngIf="results" class="results">
    <h2>Resultados de busqueda</h2>

    <div *ngIf="noResults" class="no-results">
      <p>No se encontraron resultados para "<strong>{{ query }}</strong>"</p>
    </div>

    <div *ngIf="results.communities?.length">
      <h4>Comunidades</h4>

      <div *ngFor="let community of results.communities" class="result-item">

        <img [src]="community.coverPhoto" alt="Imagen de comunidad" class="img-result" />

        <div class="description-container ">
          <div class="result-description">
            <p><strong>{{ community.name }}</strong></p>
            <p><strong></strong> {{ community.createdAt | date: 'short' }}</p>
          </div>

          <div class="medal-result">
            <svg width="14" height="17" viewBox="0 0 14 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M6.43091 0.671887C6.77466 0.443762 7.22466 0.443762 7.56841 0.671887L8.12466 1.03751C8.31216 1.15939 8.53091 1.21876 8.75279 1.20626L9.41841 1.16564C9.83091 1.14064 10.2184 1.36564 10.4028 1.73439L10.7028 2.33126C10.8028 2.53126 10.9653 2.69064 11.1622 2.79064L11.7653 3.09376C12.134 3.27814 12.359 3.66564 12.334 4.07814L12.2934 4.74376C12.2809 4.96564 12.3403 5.18751 12.4622 5.37189L12.8309 5.92814C13.059 6.27189 13.059 6.72189 12.8309 7.06564L12.4622 7.62501C12.3403 7.81251 12.2809 8.03126 12.2934 8.25314L12.334 8.91876C12.359 9.33126 12.134 9.71876 11.7653 9.90314L11.1684 10.2031C10.9684 10.3031 10.809 10.4656 10.709 10.6625L10.4059 11.2656C10.2215 11.6344 9.83404 11.8594 9.42154 11.8344L8.75591 11.7938C8.53404 11.7813 8.31216 11.8406 8.12779 11.9625L7.57154 12.3313C7.22779 12.5594 6.77779 12.5594 6.43404 12.3313L5.87466 11.9625C5.68716 11.8406 5.46841 11.7813 5.24654 11.7938L4.58091 11.8344C4.16841 11.8594 3.78091 11.6344 3.59654 11.2656L3.29654 10.6688C3.19654 10.4688 3.03404 10.3094 2.83716 10.2094L2.23404 9.90626C1.86529 9.72189 1.64029 9.33439 1.66529 8.92189L1.70591 8.25626C1.71841 8.03439 1.65904 7.81251 1.53716 7.62814L1.17154 7.06876C0.943413 6.72501 0.943413 6.27501 1.17154 5.93126L1.53716 5.37501C1.65904 5.18751 1.71841 4.96876 1.70591 4.74689L1.66529 4.08126C1.64029 3.66876 1.86529 3.28126 2.23404 3.09689L2.83091 2.79689C3.03091 2.69376 3.19341 2.53126 3.29341 2.33126L3.59341 1.73439C3.77779 1.36564 4.16529 1.14064 4.57779 1.16564L5.24341 1.20626C5.46529 1.21876 5.68716 1.15939 5.87154 1.03751L6.43091 0.671887ZM9.49966 6.50001C9.49966 5.83697 9.23627 5.20109 8.76743 4.73225C8.29859 4.2634 7.6627 4.00001 6.99966 4.00001C6.33662 4.00001 5.70074 4.2634 5.2319 4.73225C4.76306 5.20109 4.49966 5.83697 4.49966 6.50001C4.49966 7.16305 4.76306 7.79894 5.2319 8.26778C5.70074 8.73662 6.33662 9.00001 6.99966 9.00001C7.6627 9.00001 8.29859 8.73662 8.76743 8.26778C9.23627 7.79894 9.49966 7.16305 9.49966 6.50001ZM1.04029 14.3063L2.38716 11.1031C2.39341 11.1063 2.39654 11.1094 2.39966 11.1156L2.69966 11.7125C3.06529 12.4375 3.82466 12.8781 4.63716 12.8313L5.30279 12.7906C5.30904 12.7906 5.31841 12.7906 5.32466 12.7969L5.88091 13.1656C6.04029 13.2688 6.20904 13.35 6.38404 13.4063L5.20904 16.1969C5.13716 16.3688 4.97779 16.4844 4.79341 16.5C4.60904 16.5156 4.43091 16.4313 4.33091 16.275L3.32466 14.7344L1.57154 14.9938C1.39341 15.0188 1.21529 14.9469 1.10279 14.8063C0.990288 14.6656 0.968413 14.4719 1.03716 14.3063H1.04029ZM8.79029 16.1938L7.61529 13.4063C7.79029 13.35 7.95904 13.2719 8.11841 13.1656L8.67466 12.7969C8.68091 12.7938 8.68716 12.7906 8.69654 12.7906L9.36216 12.8313C10.1747 12.8781 10.934 12.4375 11.2997 11.7125L11.5997 11.1156C11.6028 11.1094 11.6059 11.1063 11.6122 11.1031L12.9622 14.3063C13.0309 14.4719 13.0059 14.6625 12.8965 14.8063C12.7872 14.95 12.6059 15.0219 12.4278 14.9938L10.6747 14.7344L9.66841 16.2719C9.56841 16.4281 9.39029 16.5125 9.20591 16.4969C9.02154 16.4813 8.86216 16.3625 8.79029 16.1938Z"
                fill="#E8EEFE" />
            </svg>
            <p>{{ community.type }}</p>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="results.events?.length">
      <h4>Eventos</h4>
      <div *ngFor="let event of results.events" class="result-item">
        <img [src]="event.coverPhoto || 'assets/events/event.jpg'" alt="Imagen de evento" class="img-result" />
        <div class="description-container">
          <div class="event-result ">
            <p><strong>{{ event.name }}</strong></p>
            <p><strong></strong> {{ event.createdAt | date: 'short' }}</p>
          </div>
          <div class="medal-result">

            <div class="medal">
              <svg width="14" height="17" viewBox="0 0 14 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M6.43091 0.671887C6.77466 0.443762 7.22466 0.443762 7.56841 0.671887L8.12466 1.03751C8.31216 1.15939 8.53091 1.21876 8.75279 1.20626L9.41841 1.16564C9.83091 1.14064 10.2184 1.36564 10.4028 1.73439L10.7028 2.33126C10.8028 2.53126 10.9653 2.69064 11.1622 2.79064L11.7653 3.09376C12.134 3.27814 12.359 3.66564 12.334 4.07814L12.2934 4.74376C12.2809 4.96564 12.3403 5.18751 12.4622 5.37189L12.8309 5.92814C13.059 6.27189 13.059 6.72189 12.8309 7.06564L12.4622 7.62501C12.3403 7.81251 12.2809 8.03126 12.2934 8.25314L12.334 8.91876C12.359 9.33126 12.134 9.71876 11.7653 9.90314L11.1684 10.2031C10.9684 10.3031 10.809 10.4656 10.709 10.6625L10.4059 11.2656C10.2215 11.6344 9.83404 11.8594 9.42154 11.8344L8.75591 11.7938C8.53404 11.7813 8.31216 11.8406 8.12779 11.9625L7.57154 12.3313C7.22779 12.5594 6.77779 12.5594 6.43404 12.3313L5.87466 11.9625C5.68716 11.8406 5.46841 11.7813 5.24654 11.7938L4.58091 11.8344C4.16841 11.8594 3.78091 11.6344 3.59654 11.2656L3.29654 10.6688C3.19654 10.4688 3.03404 10.3094 2.83716 10.2094L2.23404 9.90626C1.86529 9.72189 1.64029 9.33439 1.66529 8.92189L1.70591 8.25626C1.71841 8.03439 1.65904 7.81251 1.53716 7.62814L1.17154 7.06876C0.943413 6.72501 0.943413 6.27501 1.17154 5.93126L1.53716 5.37501C1.65904 5.18751 1.71841 4.96876 1.70591 4.74689L1.66529 4.08126C1.64029 3.66876 1.86529 3.28126 2.23404 3.09689L2.83091 2.79689C3.03091 2.69376 3.19341 2.53126 3.29341 2.33126L3.59341 1.73439C3.77779 1.36564 4.16529 1.14064 4.57779 1.16564L5.24341 1.20626C5.46529 1.21876 5.68716 1.15939 5.87154 1.03751L6.43091 0.671887ZM9.49966 6.50001C9.49966 5.83697 9.23627 5.20109 8.76743 4.73225C8.29859 4.2634 7.6627 4.00001 6.99966 4.00001C6.33662 4.00001 5.70074 4.2634 5.2319 4.73225C4.76306 5.20109 4.49966 5.83697 4.49966 6.50001C4.49966 7.16305 4.76306 7.79894 5.2319 8.26778C5.70074 8.73662 6.33662 9.00001 6.99966 9.00001C7.6627 9.00001 8.29859 8.73662 8.76743 8.26778C9.23627 7.79894 9.49966 7.16305 9.49966 6.50001ZM1.04029 14.3063L2.38716 11.1031C2.39341 11.1063 2.39654 11.1094 2.39966 11.1156L2.69966 11.7125C3.06529 12.4375 3.82466 12.8781 4.63716 12.8313L5.30279 12.7906C5.30904 12.7906 5.31841 12.7906 5.32466 12.7969L5.88091 13.1656C6.04029 13.2688 6.20904 13.35 6.38404 13.4063L5.20904 16.1969C5.13716 16.3688 4.97779 16.4844 4.79341 16.5C4.60904 16.5156 4.43091 16.4313 4.33091 16.275L3.32466 14.7344L1.57154 14.9938C1.39341 15.0188 1.21529 14.9469 1.10279 14.8063C0.990288 14.6656 0.968413 14.4719 1.03716 14.3063H1.04029ZM8.79029 16.1938L7.61529 13.4063C7.79029 13.35 7.95904 13.2719 8.11841 13.1656L8.67466 12.7969C8.68091 12.7938 8.68716 12.7906 8.69654 12.7906L9.36216 12.8313C10.1747 12.8781 10.934 12.4375 11.2997 11.7125L11.5997 11.1156C11.6028 11.1094 11.6059 11.1063 11.6122 11.1031L12.9622 14.3063C13.0309 14.4719 13.0059 14.6625 12.8965 14.8063C12.7872 14.95 12.6059 15.0219 12.4278 14.9938L10.6747 14.7344L9.66841 16.2719C9.56841 16.4281 9.39029 16.5125 9.20591 16.4969C9.02154 16.4813 8.86216 16.3625 8.79029 16.1938Z"
                  fill="#E8EEFE" />
              </svg>
              <p>{{ event.platform }}</p>
            </div>

            <div class="medal">
              <svg width="14" height="17" viewBox="0 0 14 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M6.43091 0.671887C6.77466 0.443762 7.22466 0.443762 7.56841 0.671887L8.12466 1.03751C8.31216 1.15939 8.53091 1.21876 8.75279 1.20626L9.41841 1.16564C9.83091 1.14064 10.2184 1.36564 10.4028 1.73439L10.7028 2.33126C10.8028 2.53126 10.9653 2.69064 11.1622 2.79064L11.7653 3.09376C12.134 3.27814 12.359 3.66564 12.334 4.07814L12.2934 4.74376C12.2809 4.96564 12.3403 5.18751 12.4622 5.37189L12.8309 5.92814C13.059 6.27189 13.059 6.72189 12.8309 7.06564L12.4622 7.62501C12.3403 7.81251 12.2809 8.03126 12.2934 8.25314L12.334 8.91876C12.359 9.33126 12.134 9.71876 11.7653 9.90314L11.1684 10.2031C10.9684 10.3031 10.809 10.4656 10.709 10.6625L10.4059 11.2656C10.2215 11.6344 9.83404 11.8594 9.42154 11.8344L8.75591 11.7938C8.53404 11.7813 8.31216 11.8406 8.12779 11.9625L7.57154 12.3313C7.22779 12.5594 6.77779 12.5594 6.43404 12.3313L5.87466 11.9625C5.68716 11.8406 5.46841 11.7813 5.24654 11.7938L4.58091 11.8344C4.16841 11.8594 3.78091 11.6344 3.59654 11.2656L3.29654 10.6688C3.19654 10.4688 3.03404 10.3094 2.83716 10.2094L2.23404 9.90626C1.86529 9.72189 1.64029 9.33439 1.66529 8.92189L1.70591 8.25626C1.71841 8.03439 1.65904 7.81251 1.53716 7.62814L1.17154 7.06876C0.943413 6.72501 0.943413 6.27501 1.17154 5.93126L1.53716 5.37501C1.65904 5.18751 1.71841 4.96876 1.70591 4.74689L1.66529 4.08126C1.64029 3.66876 1.86529 3.28126 2.23404 3.09689L2.83091 2.79689C3.03091 2.69376 3.19341 2.53126 3.29341 2.33126L3.59341 1.73439C3.77779 1.36564 4.16529 1.14064 4.57779 1.16564L5.24341 1.20626C5.46529 1.21876 5.68716 1.15939 5.87154 1.03751L6.43091 0.671887ZM9.49966 6.50001C9.49966 5.83697 9.23627 5.20109 8.76743 4.73225C8.29859 4.2634 7.6627 4.00001 6.99966 4.00001C6.33662 4.00001 5.70074 4.2634 5.2319 4.73225C4.76306 5.20109 4.49966 5.83697 4.49966 6.50001C4.49966 7.16305 4.76306 7.79894 5.2319 8.26778C5.70074 8.73662 6.33662 9.00001 6.99966 9.00001C7.6627 9.00001 8.29859 8.73662 8.76743 8.26778C9.23627 7.79894 9.49966 7.16305 9.49966 6.50001ZM1.04029 14.3063L2.38716 11.1031C2.39341 11.1063 2.39654 11.1094 2.39966 11.1156L2.69966 11.7125C3.06529 12.4375 3.82466 12.8781 4.63716 12.8313L5.30279 12.7906C5.30904 12.7906 5.31841 12.7906 5.32466 12.7969L5.88091 13.1656C6.04029 13.2688 6.20904 13.35 6.38404 13.4063L5.20904 16.1969C5.13716 16.3688 4.97779 16.4844 4.79341 16.5C4.60904 16.5156 4.43091 16.4313 4.33091 16.275L3.32466 14.7344L1.57154 14.9938C1.39341 15.0188 1.21529 14.9469 1.10279 14.8063C0.990288 14.6656 0.968413 14.4719 1.03716 14.3063H1.04029ZM8.79029 16.1938L7.61529 13.4063C7.79029 13.35 7.95904 13.2719 8.11841 13.1656L8.67466 12.7969C8.68091 12.7938 8.68716 12.7906 8.69654 12.7906L9.36216 12.8313C10.1747 12.8781 10.934 12.4375 11.2997 11.7125L11.5997 11.1156C11.6028 11.1094 11.6059 11.1063 11.6122 11.1031L12.9622 14.3063C13.0309 14.4719 13.0059 14.6625 12.8965 14.8063C12.7872 14.95 12.6059 15.0219 12.4278 14.9938L10.6747 14.7344L9.66841 16.2719C9.56841 16.4281 9.39029 16.5125 9.20591 16.4969C9.02154 16.4813 8.86216 16.3625 8.79029 16.1938Z"
                  fill="#E8EEFE" />
              </svg>
              <p>Genero</p>
            </div>

            <div class="medal">
              <svg width="14" height="17" viewBox="0 0 14 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M6.43091 0.671887C6.77466 0.443762 7.22466 0.443762 7.56841 0.671887L8.12466 1.03751C8.31216 1.15939 8.53091 1.21876 8.75279 1.20626L9.41841 1.16564C9.83091 1.14064 10.2184 1.36564 10.4028 1.73439L10.7028 2.33126C10.8028 2.53126 10.9653 2.69064 11.1622 2.79064L11.7653 3.09376C12.134 3.27814 12.359 3.66564 12.334 4.07814L12.2934 4.74376C12.2809 4.96564 12.3403 5.18751 12.4622 5.37189L12.8309 5.92814C13.059 6.27189 13.059 6.72189 12.8309 7.06564L12.4622 7.62501C12.3403 7.81251 12.2809 8.03126 12.2934 8.25314L12.334 8.91876C12.359 9.33126 12.134 9.71876 11.7653 9.90314L11.1684 10.2031C10.9684 10.3031 10.809 10.4656 10.709 10.6625L10.4059 11.2656C10.2215 11.6344 9.83404 11.8594 9.42154 11.8344L8.75591 11.7938C8.53404 11.7813 8.31216 11.8406 8.12779 11.9625L7.57154 12.3313C7.22779 12.5594 6.77779 12.5594 6.43404 12.3313L5.87466 11.9625C5.68716 11.8406 5.46841 11.7813 5.24654 11.7938L4.58091 11.8344C4.16841 11.8594 3.78091 11.6344 3.59654 11.2656L3.29654 10.6688C3.19654 10.4688 3.03404 10.3094 2.83716 10.2094L2.23404 9.90626C1.86529 9.72189 1.64029 9.33439 1.66529 8.92189L1.70591 8.25626C1.71841 8.03439 1.65904 7.81251 1.53716 7.62814L1.17154 7.06876C0.943413 6.72501 0.943413 6.27501 1.17154 5.93126L1.53716 5.37501C1.65904 5.18751 1.71841 4.96876 1.70591 4.74689L1.66529 4.08126C1.64029 3.66876 1.86529 3.28126 2.23404 3.09689L2.83091 2.79689C3.03091 2.69376 3.19341 2.53126 3.29341 2.33126L3.59341 1.73439C3.77779 1.36564 4.16529 1.14064 4.57779 1.16564L5.24341 1.20626C5.46529 1.21876 5.68716 1.15939 5.87154 1.03751L6.43091 0.671887ZM9.49966 6.50001C9.49966 5.83697 9.23627 5.20109 8.76743 4.73225C8.29859 4.2634 7.6627 4.00001 6.99966 4.00001C6.33662 4.00001 5.70074 4.2634 5.2319 4.73225C4.76306 5.20109 4.49966 5.83697 4.49966 6.50001C4.49966 7.16305 4.76306 7.79894 5.2319 8.26778C5.70074 8.73662 6.33662 9.00001 6.99966 9.00001C7.6627 9.00001 8.29859 8.73662 8.76743 8.26778C9.23627 7.79894 9.49966 7.16305 9.49966 6.50001ZM1.04029 14.3063L2.38716 11.1031C2.39341 11.1063 2.39654 11.1094 2.39966 11.1156L2.69966 11.7125C3.06529 12.4375 3.82466 12.8781 4.63716 12.8313L5.30279 12.7906C5.30904 12.7906 5.31841 12.7906 5.32466 12.7969L5.88091 13.1656C6.04029 13.2688 6.20904 13.35 6.38404 13.4063L5.20904 16.1969C5.13716 16.3688 4.97779 16.4844 4.79341 16.5C4.60904 16.5156 4.43091 16.4313 4.33091 16.275L3.32466 14.7344L1.57154 14.9938C1.39341 15.0188 1.21529 14.9469 1.10279 14.8063C0.990288 14.6656 0.968413 14.4719 1.03716 14.3063H1.04029ZM8.79029 16.1938L7.61529 13.4063C7.79029 13.35 7.95904 13.2719 8.11841 13.1656L8.67466 12.7969C8.68091 12.7938 8.68716 12.7906 8.69654 12.7906L9.36216 12.8313C10.1747 12.8781 10.934 12.4375 11.2997 11.7125L11.5997 11.1156C11.6028 11.1094 11.6059 11.1063 11.6122 11.1031L12.9622 14.3063C13.0309 14.4719 13.0059 14.6625 12.8965 14.8063C12.7872 14.95 12.6059 15.0219 12.4278 14.9938L10.6747 14.7344L9.66841 16.2719C9.56841 16.4281 9.39029 16.5125 9.20591 16.4969C9.02154 16.4813 8.86216 16.3625 8.79029 16.1938Z"
                  fill="#E8EEFE" />
              </svg>
              <p>Premiación</p>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div *ngIf="results.teams?.length">
      <h4>Equipos</h4>
      <div *ngFor="let team of results.teams" class="result-item">
        <img [src]="team.coverPhoto || 'assets/events/event.jpg'" alt="Imagen de equipo" class="img-result" />
        <p><strong>{{ team.name }}</strong></p>
      </div>
    </div>

    <div *ngIf="results.users?.length">
      <h4>Usuarios</h4>
      <div *ngFor="let user of results.users" class="result-item">
        <img [src]="user.avatar || 'assets/login/avatar-login.jpg'" alt="Avatar de usuario" class="img-user" />
        <div class="result-description">
          <p><strong>{{ user.username }}</strong></p>
          <p>
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
              <rect width="24" height="24" fill="none" />
              <path fill="#E8EEFE" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7l8-5V6l-8 5l-8-5v2z" />
            </svg>
            {{ user.email }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>